<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Familjeläge – Panikknappen</title>
  <link rel="stylesheet" href="/apps/family/style.css" />
  <link rel="stylesheet" href="/assets/css/pwa.css" />
</head>
<body>
  <div class="ambient ambient-a" aria-hidden="true"></div>
  <div class="ambient ambient-b" aria-hidden="true"></div>

  <main class="family-shell">
    <section id="parent-lock" class="lock-screen" aria-live="polite">
      <article class="lock-card">
        <p class="eyebrow">Föräldrakod krävs</p>
        <h1>Lås upp familjeläge</h1>
        <p class="lead">Ange 4-siffrig kod för att öppna föräldradelen. Initial testkod är <strong>1234</strong>.</p>

        <form id="pin-form" class="pin-form" autocomplete="off">
          <label for="pin-input">Kod</label>
          <input id="pin-input" name="pin" type="password" inputmode="numeric" pattern="[0-9]*" maxlength="4" placeholder="••••" required />
          <div class="pin-actions">
            <button type="submit">Lås upp</button>
          </div>
          <label class="remember-row" for="remember-device">
            <input id="remember-device" type="checkbox" />
            Kom ihåg i 15 minuter på denna enhet
          </label>
          <p id="lock-message" class="lock-message" role="status"></p>
        </form>
      </article>
    </section>

    <section id="family-dashboard" class="dashboard" hidden>
      <header class="hero">
        <a class="back-link" href="/index.html">← Till appval</a>
        <p class="eyebrow">Familjeläge</p>
        <h2>Trygghetsöversikt i realtid</h2>
        <p class="lead">Samma grundprincip: tydlig status, snabb åtgärd och logg. Nu med kodskydd för vuxna.</p>
      </header>

      <section class="kpi-grid" aria-label="Snabbstatus">
        <article class="panel kpi">
          <p class="kpi-label">Aktiv signal</p>
          <p class="kpi-value success">Ingen aktiv paniksignal</p>
        </article>
        <article class="panel kpi">
          <p class="kpi-label">Senaste kontroll</p>
          <p class="kpi-value">17 feb 2026 · 13:54</p>
        </article>
        <article class="panel kpi">
          <p class="kpi-label">Responsmål</p>
          <p class="kpi-value">&lt; 30 sekunder</p>
        </article>
      </section>

      <section class="grid">
        <article class="panel">
          <h2>Snabbåtgärder</h2>
          <button>Ring upp barnet</button>
          <button>Skicka trygghetsmeddelande</button>
          <button>Öppna delad plats</button>
          <button id="lock-now" class="ghost-btn">Lås nu</button>
        </article>

        <article class="panel panel-wide">
          <h2>Händelselogg (senaste 24 timmar)</h2>
          <ul>
            <li><span>13:54</span> Testsignal mottagen</li>
            <li><span>13:21</span> Position uppdaterad</li>
            <li><span>11:07</span> Check-in klar</li>
            <li><span>09:42</span> Appen öppnades i barnläge</li>
          </ul>
        </article>
      </section>

      <section class="panel settings-panel">
        <h2>Föräldrainställningar</h2>
        <p class="lead">Tips: byt kod direkt efter test.</p>
        <form id="change-pin-form" class="change-pin-form" autocomplete="off">
          <label for="current-pin">Nuvarande kod</label>
          <input id="current-pin" type="password" inputmode="numeric" maxlength="4" required />

          <label for="new-pin">Ny kod</label>
          <input id="new-pin" type="password" inputmode="numeric" maxlength="4" required />

          <label for="confirm-pin">Bekräfta ny kod</label>
          <input id="confirm-pin" type="password" inputmode="numeric" maxlength="4" required />

          <button type="submit">Spara ny kod</button>
          <p id="change-pin-message" class="lock-message" role="status"></p>
        </form>
      </section>
    </section>
  </main>

  <script src="/assets/js/pwa.js"></script>
  <script src="/assets/js/family-lock.js"></script>
</body>
</html>
