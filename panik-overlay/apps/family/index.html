<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Familjeläge – Panikknappen</title>
  <link rel="stylesheet" href="/apps/family/style.css" />
  <link rel="stylesheet" href="/assets/css/pwa.css" />
</head>
<body>
  <div class="ambient ambient-a" aria-hidden="true"></div>
  <div class="ambient ambient-b" aria-hidden="true"></div>

  <main class="family-shell" id="familyShell" aria-hidden="true" inert>
    <header class="hero">
      <a class="back-link" href="/index.html">← Till appval</a>
      <p class="eyebrow">Familjeläge</p>
      <h1>Trygghetsöversikt i realtid</h1>
      <p class="lead">Samma grundprincip: tydlig status, snabb åtgärd och logg. Nu med mer professionell dashboard-känsla.</p>
      <button id="lockAgainBtn" class="ghost-btn" type="button">Lås familjeläge igen</button>
    </header>

    <section class="kpi-grid" aria-label="Snabbstatus">
      <article class="panel kpi">
        <p class="kpi-label">Aktiv signal</p>
        <p class="kpi-value success">Ingen aktiv paniksignal</p>
      </article>
      <article class="panel kpi">
        <p class="kpi-label">Senaste kontroll</p>
        <p class="kpi-value">17 feb 2026 · 13:54</p>
      </article>
      <article class="panel kpi">
        <p class="kpi-label">Responsmål</p>
        <p class="kpi-value">&lt; 30 sekunder</p>
      </article>
    </section>

    <section class="grid">
      <article class="panel">
        <h2>Snabbåtgärder</h2>
        <button data-action="Ring upp barnet">Ring upp barnet</button>
        <button data-action="Skicka trygghetsmeddelande">Skicka trygghetsmeddelande</button>
        <button data-action="Öppna delad plats">Öppna delad plats</button>
      </article>

      <article class="panel panel-wide">
        <h2>Händelselogg (senaste 24 timmar)</h2>
        <ul id="eventList">
          <li><span>13:54</span> Testsignal mottagen</li>
          <li><span>13:21</span> Position uppdaterad</li>
          <li><span>11:07</span> Check-in klar</li>
          <li><span>09:42</span> Appen öppnades i barnläge</li>
        </ul>
      </article>

      <article class="panel panel-wide security-log">
        <h2>Säkerhetslogg (lokalt i denna enhet)</h2>
        <p class="tiny">Visar senaste händelser för kodlås och åtgärder. Lagring sker i browsern via localStorage.</p>
        <ul id="securityLogList">
          <li>Ingen säkerhetslogg ännu.</li>
        </ul>
      </article>
    </section>
  </main>

  <section id="parentLock" class="parent-lock" aria-live="polite">
    <div class="lock-card" role="dialog" aria-modal="true" aria-labelledby="lockTitle">
      <p class="eyebrow">Skyddat läge</p>
      <h2 id="lockTitle">Föräldrakod krävs</h2>
      <p class="lock-copy">Ange föräldrakoden för att öppna familjefunktionerna. Initial testkod är <strong>1234</strong>.</p>
      <form id="codeForm" class="code-form">
        <label for="parentCodeInput">Kod</label>
        <input id="parentCodeInput" inputmode="numeric" pattern="[0-9]*" minlength="4" maxlength="8" autocomplete="off" placeholder="••••" required />
        <button type="submit">Lås upp</button>
      </form>
      <p id="lockMessage" class="lock-message">Tips: byt kod i inställningar innan skarp drift.</p>
      <details>
        <summary>Smart nästa nivå (förslag)</summary>
        <ul class="ideas">
          <li>Byt från fast testkod till personlig PIN + hash (krypterat fingeravtryck av koden).</li>
          <li>Lägg till timeout (automatisk låsning) efter inaktivitet.</li>
          <li>Komplettera med biometrisk upplåsning i mobilskal (Face ID/Touch ID via native wrapper).</li>
        </ul>
      </details>
    </div>
  </section>

  <script src="/apps/family/script.js" defer></script>
  <script src="/assets/js/pwa.js"></script>
  <script src="/assets/js/family-lock.js"></script>
</body>
</html>
